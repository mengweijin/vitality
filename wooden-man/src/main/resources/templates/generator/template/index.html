<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:replace="quickboot/include::head('QuickBoot Admin')"></head>

<body>
    <div style="padding: 0px 0px; padding-right: 15px;">
        <div class="layui-fluid" style="padding: 0px 0px;">
            <div class="layui-row">
                <div class="layui-col-xs12 layui-col-sm4 layui-col-md3 layui-col-lg2">
                    <div id="template_tree" data-active-node-id="" style="border-right: 1px solid #dadada;"></div>
                </div>
                <div class="layui-col-xs12 layui-col-sm8 layui-col-md9 layui-col-lg10">
                    <div style="text-align: center; padding: 15px 0; border-bottom: 1px solid #dadada;"><h3>模板详情 <i class="fa-solid fa-angles-down"></i></h3></div>
                    <div id="generator_template_detail">
                        <div style="display:flex;justify-content: center; align-items:center; height: 300px;">
                            <div style="border: 1px solid #dadada; border-radius:30px; padding: 50px 100px;">
                                <i class="fa-solid fa-hand-point-left"></i> 想查看内容？试试点击左侧菜单
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script th:inline="javascript">
        layui.use(['jquery', 'layer','table', 'tree'], function () {
            let $ = layui.$, layer = layui.layer, table = layui.table, tree = layui.tree;
            let treeData = [[${treeData}]];

            var inst1 = tree.render({
              elem: '#template_tree'
              ,onlyIconControl: true
              ,data: treeData
              ,click: function(obj){
                //console.log(obj.data); // 得到当前点击的节点数据
                //console.log(obj.state); // 得到当前节点的展开状态：open、close、normal
                //console.log(obj.elem); // 得到当前节点元素
                //console.log(obj.data.children); //当前节点下是否有子节点

                let activeNodeId = $("#template_tree").attr("data-active-node-id");
                let currentNodeId = obj.data.id;
                if(currentNodeId && activeNodeId != currentNodeId) {
                    $("#template_tree div [data-id='" + currentNodeId + "'] div:first").css("background-color", "#C2C2C2");
                    $("#template_tree div [data-id='" + activeNodeId + "'] div:first").css("background-color", "");
                    $("#template_tree").attr("data-active-node-id", currentNodeId);

                    $("#generator_template_detail").load("/generator/template/detail/" + currentNodeId);
                }
              }
            });
        });
    </script>
</body>

</html>